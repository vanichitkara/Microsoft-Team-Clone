(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{138:function(e,t){},140:function(e,t){},150:function(e,t,a){},159:function(e,t,a){},160:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),i=a(9),r=a.n(i),l=a(14),o=a(204),s=a(162),d=a(193),j=a(57),b=a(19),u=a(196),m=a(161),x=a(206),O=a(198),p=a(86),f=a(58),g=a.n(f),h=a(5),v=Object(n.createContext)(),C=Object(p.io)("https://microsoft-teams-video-call.herokuapp.com"),w=function(e){var t=e.children,a=Object(n.useState)(!1),c=Object(b.a)(a,2),i=c[0],r=c[1],l=Object(n.useState)(!1),o=Object(b.a)(l,2),s=o[0],d=o[1],j=Object(n.useState)(),u=Object(b.a)(j,2),m=u[0],x=u[1],O=Object(n.useState)(""),p=Object(b.a)(O,2),f=p[0],w=p[1],y=Object(n.useState)({}),N=Object(b.a)(y,2),k=N[0],S=N[1],D=Object(n.useState)(""),I=Object(b.a)(D,2),V=I[0],A=I[1],P=Object(n.useRef)(),R=Object(n.useRef)(),T=Object(n.useRef)();Object(n.useEffect)((function(){navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(e){x(e),P.current.srcObject=e})),C.on("me",(function(e){return A(e)})),C.on("callUser",(function(e){var t=e.from,a=e.name,n=e.signal;S({isReceivingCall:!0,from:t,name:a,signal:n})}))}),[]);var U=!0;var B=!0;return Object(h.jsx)(v.Provider,{value:{call:k,callAccepted:i,myVideo:P,userVideo:R,stream:m,name:f,setName:w,callEnded:s,me:V,callUser:function(e){var t=new g.a({initiator:!0,trickle:!1,stream:m});t.on("signal",(function(t){C.emit("callUser",{userToCall:e,signalData:t,from:V,name:f})})),t.on("stream",(function(e){R.current.srcObject=e})),C.on("callAccepted",(function(e){r(!0),t.signal(e)})),T.current=t},leaveCall:function(){d(!0),T.current.destroy(),window.close()},answerCall:function(){r(!0);var e=new g.a({initiator:!1,trickle:!1,stream:m});e.on("signal",(function(e){C.emit("answerCall",{signal:e,to:k.from})})),e.on("stream",(function(e){R.current.srcObject=e})),e.signal(k.signal),T.current=e},toggleMic:function(){U=!U,P.current.srcObject.getAudioTracks()[0].enabled=U},toggleVideo:function(){B=!B,P.current.srcObject.getVideoTracks()[0].enabled=B}},children:t})},y=(a(150),Object(d.a)((function(e){return{video:Object(l.a)({width:"400px"},e.breakpoints.down("xs"),{width:"300px"}),gridContainer:Object(l.a)({justifyContent:"center"},e.breakpoints.down("xs"),{width:"100%"}),buttonGridContainer:Object(l.a)({width:"400px",flexDirection:"row"},e.breakpoints.down("xs"),{width:"100%",flexDirection:"column"}),margin:{marginTop:10},padding:{padding:10},paper:{padding:"10px",border:"2px",margin:"10px"}}}))),N=function(){var e=Object(n.useContext)(v),t=e.name,a=e.callAccepted,i=e.myVideo,r=e.userVideo,o=e.callEnded,d=e.stream,p=e.call,f=e.toggleMic,g=e.toggleVideo,C=y(),w=c.a.useState({mic:!0,video:!0}),N=Object(b.a)(w,2),k=N[0],S=N[1],D=function(e){S(Object(j.a)(Object(j.a)({},k),{},Object(l.a)({},e.target.name,e.target.checked)))};return Object(h.jsxs)(u.a,{container:!0,className:C.gridContainer,children:[d&&Object(h.jsx)(m.a,{className:C.paper,children:Object(h.jsxs)(u.a,{item:!0,xs:12,md:6,children:[Object(h.jsx)(s.a,{variant:"h5",gutterBottom:!0,children:t||"Name"}),Object(h.jsx)("video",{playsInline:!0,muted:!0,ref:i,autoPlay:!0,className:C.video}),Object(h.jsxs)(u.a,{container:!0,className:C.buttonGridContainer,children:[Object(h.jsx)(u.a,{item:!0,xs:12,md:6,className:C.padding,children:Object(h.jsx)(O.a,{control:Object(h.jsx)(x.a,{checked:k.mic,onChange:D,name:"mic",color:"primary"}),label:"Mic",onClick:function(){return f()},labelPlacement:"start"})}),Object(h.jsx)(u.a,{item:!0,xs:12,md:6,className:C.padding,children:Object(h.jsx)(O.a,{control:Object(h.jsx)(x.a,{checked:k.video,onChange:D,name:"video",color:"primary"}),label:"Video",onClick:function(){return g()},labelPlacement:"start"})})]})]})}),a&&!o&&Object(h.jsx)(m.a,{className:C.paper,children:Object(h.jsxs)(u.a,{item:!0,xs:12,md:6,children:[Object(h.jsx)(s.a,{variant:"h5",gutterBottom:!0,children:p.name||"Name"}),Object(h.jsx)("video",{playsInline:!0,ref:r,autoPlay:!0,className:C.video})]})})]})},k=a(199),S=a(205),D=a(200),I=a(92),V=a(201),A=a(202),P=a(203),R=Object(d.a)((function(e){return{root:{display:"flex",flexDirection:"column"},gridContainer:Object(l.a)({width:"100%"},e.breakpoints.down("xs"),{flexDirection:"column"}),container:Object(l.a)({width:"600px",margin:"35px 0",padding:0},e.breakpoints.down("xs"),{width:"80%"}),margin:{marginTop:20},padding:{padding:20},paper:{padding:"10px 20px",border:"2px"}}})),T=function(e){var t=e.children,a=Object(n.useContext)(v),c=a.me,i=a.callAccepted,r=a.name,l=a.setName,o=a.callEnded,s=a.leaveCall,d=a.callUser,j=Object(n.useState)(""),x=Object(b.a)(j,2),O=x[0],p=x[1],f=R();return Object(h.jsx)(k.a,{className:f.container,children:Object(h.jsxs)(m.a,{elevation:10,className:f.paper,children:[Object(h.jsx)("form",{className:f.root,noValidate:!0,autoComplete:"off",children:Object(h.jsxs)(u.a,{container:!0,className:f.gridContainer,children:[Object(h.jsxs)(u.a,{item:!0,xs:12,md:6,className:f.padding,children:[Object(h.jsx)(S.a,{label:"Name",value:r,onChange:function(e){return l(e.target.value)},fullWidth:!0}),Object(h.jsx)(I.CopyToClipboard,{text:c,className:f.margin,children:Object(h.jsx)(D.a,{variant:"contained",color:"primary",fullWidth:!0,startIcon:Object(h.jsx)(V.a,{fontSize:"large"}),children:"Copy Your ID"})})]}),Object(h.jsxs)(u.a,{item:!0,xs:12,md:6,className:f.padding,children:[Object(h.jsx)(S.a,{label:"ID to call",value:O,onChange:function(e){return p(e.target.value)},fullWidth:!0}),i&&!o?Object(h.jsx)(D.a,{variant:"contained",color:"secondary",startIcon:Object(h.jsx)(A.a,{fontSize:"large"}),fullWidth:!0,onClick:s,className:f.margin,children:"Hang Up"}):Object(h.jsx)(D.a,{variant:"contained",color:"primary",startIcon:Object(h.jsx)(P.a,{fontSize:"large"}),fullWidth:!0,onClick:function(){return d(O)},className:f.margin,children:"Call"})]})]})}),t]})})},U=function(){var e=Object(n.useContext)(v),t=e.answerCall,a=e.call,c=e.callAccepted;return Object(h.jsx)(h.Fragment,{children:a.isReceivingCall&&!c&&Object(h.jsxs)("div",{style:{display:"flex",justifyContent:"space-around"},children:[Object(h.jsxs)("h1",{children:[a.name," is calling:"]}),Object(h.jsx)(D.a,{variant:"contained",color:"primary",onClick:t,children:"Answer"})]})})},B=Object(d.a)((function(e){return{appBar:Object(l.a)({borderRadius:15,margin:"30px 100px",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",width:"600px",border:"2px"},e.breakpoints.down("xs"),{width:"90%"}),image:{marginLeft:"15px"},wrapper:{display:"flex",flexDirection:"column",alignItems:"center",width:"100%"}}})),E=function(){var e=B();return Object(h.jsxs)("div",{className:e.wrapper,children:[Object(h.jsx)(o.a,{className:e.appBar,position:"static",color:"inherit",children:Object(h.jsx)(s.a,{variant:"h3",align:"center",color:"textPrimary",children:"Video Chat"})}),Object(h.jsx)(N,{}),Object(h.jsx)(T,{children:Object(h.jsx)(U,{})})]})};a(159);r.a.render(Object(h.jsx)(w,{children:Object(h.jsx)(E,{})}),document.getElementById("root"))}},[[160,1,2]]]);
//# sourceMappingURL=main.66701f6c.chunk.js.map